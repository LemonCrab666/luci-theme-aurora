import{c as e}from"./utils-DKirHKlh.js";class r{constructor(){this.init()}init(){"undefined"!=typeof ui&&ui.menu&&ui.menu.load().then(e=>this.render(e))}render(e){let r=e,t="";if(this.renderModeMenu(e),L.env.dispatchpath.length>=3){for(let e=0;e<3&&r;e++)r=r.children[L.env.dispatchpath[e]],t=t+(t?"/":"")+L.env.dispatchpath[e];r&&this.renderTabMenu(r,t)}}renderTabMenu(r,t,a=0){const n=document.querySelector("#tabmenu");if(!n)return;const o=e("ul",{class:"flex border-b border-gray-200 dark:border-gray-700 space-x-1"}),d=ui.menu.getChildren(r);let i=null;d.forEach(r=>{const n=L.env.dispatchpath[3+a]===r.name,d=["block py-2 px-4 text-sm font-medium border-b-2 transition-colors duration-200",n?"text-blue-600 border-blue-600 dark:text-blue-400 dark:border-blue-400":"text-gray-600 border-transparent hover:text-gray-800 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"].join(" "),s=e("li",{class:`tabmenu-item-${r.name} ${n?"active":""}`},[e("a",{href:L.url(t,r.name),class:d},[_(r.title)])]);o.appendChild(s),n&&(i=r)}),0!==o.children.length&&(n.innerHTML="",n.appendChild(o),n.style.display="",i&&this.renderTabMenu(i,t+"/"+i.name,a+1))}renderMainMenu(r,t,a=0){const n=a?e("ul",{class:"absolute top-full left-0 z-50 mt-1 min-w-[160px] bg-white border border-gray-200 rounded-md shadow-lg opacity-0 invisible transform scale-95 transition-all duration-200 dark:bg-gray-700 dark:border-gray-600"}):document.querySelector("#topmenu");if(!n)return e([]);const o=ui.menu.getChildren(r);return 0===o.length||a>1?e([]):(o.forEach(r=>{const o=this.renderMainMenu(r,t+"/"+r.name,a+1),d=o.firstElementChild,i=d?"#":L.url(t,r.name),s=e("li",{class:d&&0===a?"relative dropdown":""},[e("a",{class:(0===a?"block px-3 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700 transition-colors duration-200":"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-gray-100")+(d?" dropdown-toggle":""),href:i},[_(r.title)]),o]);d&&0===a&&(s.addEventListener("mouseenter",()=>{const e=s.querySelector(".absolute");e&&(e.classList.remove("opacity-0","invisible","scale-95"),e.classList.add("opacity-100","visible","scale-100"))}),s.addEventListener("mouseleave",()=>{const e=s.querySelector(".absolute");e&&(e.classList.add("opacity-0","invisible","scale-95"),e.classList.remove("opacity-100","visible","scale-100"))})),n.appendChild(s)}),0===a&&(n.style.display=""),n)}renderModeMenu(r){const t=document.querySelector("#modemenu");t&&(ui.menu.getChildren(r).forEach((r,a)=>{const n=L.env.requestpath.length?r.name===L.env.requestpath[0]:0===a,o=["block px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200",n?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-700 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700"].join(" "),d=e("li",{class:n?"active":""},[e("a",{href:L.url(r.name),class:o},[_(r.title)])]);t.appendChild(d),n&&this.renderMainMenu(r,r.name)}),t.children.length>1&&(t.style.display=""))}}const t=new r;"undefined"!=typeof window&&(window.MenuRenderer=r);export{t as m};
